!function(a){a.Parse=a.Parse||{},a.Parse.VERSION="js1.3.1"}(this),function(){var ar=this,ad=ar._,ai={},af=Array.prototype,an=Object.prototype,ae=Function.prototype,ah=af.push,ac=af.slice,aw=af.concat,aq=an.toString,ak=an.hasOwnProperty,au=af.forEach,ao=af.map,ag=af.reduce,at=af.reduceRight,ab=af.filter,aj=af.every,ap=af.some,Y=af.indexOf,av=af.lastIndexOf,aa=Array.isArray,R=Object.keys,z=ae.bind,Z=function(a){return a instanceof Z?a:this instanceof Z?(this._wrapped=a,void 0):new Z(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Z),exports._=Z):ar._=Z,Z.VERSION="1.4.4";var q=Z.each=Z.forEach=function(f,b,d){if(null!=f){if(au&&f.forEach===au){f.forEach(b,d)}else{if(f.length===+f.length){for(var a=0,c=f.length;c>a;a++){if(b.call(d,f[a],a,f)===ai){return}}}else{for(var g in f){if(Z.has(f,g)&&b.call(d,f[g],g,f)===ai){return}}}}}};Z.map=Z.collect=function(c,a,d){var b=[];return null==c?b:ao&&c.map===ao?c.map(a,d):(q(c,function(h,f,g){b[b.length]=a.call(d,h,f,g)}),b)};var I="Reduce of empty array with no initial value";Z.reduce=Z.foldl=Z.inject=function(d,b,f,c){var a=arguments.length>2;if(null==d&&(d=[]),ag&&d.reduce===ag){return c&&(b=Z.bind(b,c)),a?d.reduce(b,f):d.reduce(b)}if(q(d,function(h,g,i){a?f=b.call(c,f,h,g,i):(f=h,a=!0)}),!a){throw new TypeError(I)}return f},Z.reduceRight=Z.foldr=function(f,b,h,d){var a=arguments.length>2;if(null==f&&(f=[]),at&&f.reduceRight===at){return d&&(b=Z.bind(b,d)),a?f.reduceRight(b,h):f.reduceRight(b)}var c=f.length;if(c!==+c){var g=Z.keys(f);c=g.length}if(q(f,function(i,e,j){e=g?g[--c]:--c,a?h=b.call(d,h,f[e],e,j):(h=f[e],a=!0)}),!a){throw new TypeError(I)}return h},Z.find=Z.detect=function(c,a,d){var b;return V(c,function(h,f,g){return a.call(d,h,f,g)?(b=h,!0):void 0}),b},Z.filter=Z.select=function(c,a,d){var b=[];return null==c?b:ab&&c.filter===ab?c.filter(a,d):(q(c,function(h,f,g){a.call(d,h,f,g)&&(b[b.length]=h)}),b)},Z.reject=function(b,a,c){return Z.filter(b,function(g,f,d){return !a.call(c,g,f,d)},c)},Z.every=Z.all=function(d,b,c){b||(b=Z.identity);var a=!0;return null==d?a:aj&&d.every===aj?d.every(b,c):(q(d,function(g,f,h){return(a=a&&b.call(c,g,f,h))?void 0:ai}),!!a)};var V=Z.some=Z.any=function(d,b,c){b||(b=Z.identity);var a=!1;return null==d?a:ap&&d.some===ap?d.some(b,c):(q(d,function(g,f,h){return a||(a=b.call(c,g,f,h))?ai:void 0}),!!a)};Z.contains=Z.include=function(b,a){return null==b?!1:Y&&b.indexOf===Y?-1!=b.indexOf(a):V(b,function(c){return c===a})},Z.invoke=function(c,a){var d=ac.call(arguments,2),b=Z.isFunction(a);return Z.map(c,function(f){return(b?a:f[a]).apply(f,d)})},Z.pluck=function(b,a){return Z.map(b,function(c){return c[a]})},Z.where=function(b,a,c){return Z.isEmpty(a)?c?null:[]:Z[c?"find":"filter"](b,function(d){for(var f in a){if(a[f]!==d[f]){return !1}}return !0})},Z.findWhere=function(b,a){return Z.where(b,a,!0)},Z.max=function(c,a,d){if(!a&&Z.isArray(c)&&c[0]===+c[0]&&c.length<65535){return Math.max.apply(Math,c)}if(!a&&Z.isEmpty(c)){return -1/0}var b={computed:-1/0,value:-1/0};return q(c,function(h,f,g){var j=a?a.call(d,h,f,g):h;j>=b.computed&&(b={value:h,computed:j})}),b.value},Z.min=function(c,a,d){if(!a&&Z.isArray(c)&&c[0]===+c[0]&&c.length<65535){return Math.min.apply(Math,c)}if(!a&&Z.isEmpty(c)){return 1/0}var b={computed:1/0,value:1/0};return q(c,function(h,f,g){var j=a?a.call(d,h,f,g):h;j<b.computed&&(b={value:h,computed:j})}),b.value},Z.shuffle=function(c){var a,d=0,b=[];return q(c,function(f){a=Z.random(d++),b[d-1]=b[a],b[a]=f}),b};var al=function(a){return Z.isFunction(a)?a:function(b){return b[a]}};Z.sortBy=function(c,a,d){var b=al(a);return Z.pluck(Z.map(c,function(h,g,f){return{value:h,index:g,criteria:b.call(d,h,g,f)}}).sort(function(h,f){var i=h.criteria,g=f.criteria;if(i!==g){if(i>g||void 0===i){return 1}if(g>i||void 0===g){return -1}}return h.index<f.index?-1:1}),"value")};var K=function(f,b,g,d){var a={},c=al(b||Z.identity);return q(f,function(h,i){var e=c.call(g,h,i,f);d(a,e,h)}),a};Z.groupBy=function(b,a,c){return K(b,a,c,function(f,d,g){(Z.has(f,d)?f[d]:f[d]=[]).push(g)})},Z.countBy=function(b,a,c){return K(b,a,c,function(f,d){Z.has(f,d)||(f[d]=0),f[d]++})},Z.sortedIndex=function(g,c,j,f){j=null==j?Z.identity:al(j);for(var b=j.call(f,c),d=0,h=g.length;h>d;){var a=d+h>>>1;j.call(f,g[a])<b?d=a+1:h=a}return d},Z.toArray=function(a){return a?Z.isArray(a)?ac.call(a):a.length===+a.length?Z.map(a,Z.identity):Z.values(a):[]},Z.size=function(a){return null==a?0:a.length===+a.length?a.length:Z.keys(a).length},Z.first=Z.head=Z.take=function(b,a,c){return null==b?void 0:null==a||c?b[0]:ac.call(b,0,a)},Z.initial=function(b,a,c){return ac.call(b,0,b.length-(null==a||c?1:a))},Z.last=function(b,a,c){return null==b?void 0:null==a||c?b[b.length-1]:ac.call(b,Math.max(b.length-a,0))},Z.rest=Z.tail=Z.drop=function(b,a,c){return ac.call(b,null==a||c?1:a)},Z.compact=function(a){return Z.filter(a,Z.identity)};var X=function(b,a,c){return q(b,function(d){Z.isArray(d)?a?ah.apply(c,d):X(d,a,c):c.push(d)}),c};Z.flatten=function(b,a){return X(b,a,[])},Z.without=function(a){return Z.difference(a,ac.call(arguments,1))},Z.uniq=Z.unique=function(f,b,h,d){Z.isFunction(b)&&(d=h,h=b,b=!1);var a=h?Z.map(f,h,d):f,c=[],g=[];return q(a,function(i,e){(b?e&&g[g.length-1]===i:Z.contains(g,i))||(g.push(i),c.push(f[e]))}),c},Z.union=function(){return Z.uniq(aw.apply(af,arguments))},Z.intersection=function(b){var a=ac.call(arguments,1);return Z.filter(Z.uniq(b),function(c){return Z.every(a,function(d){return Z.indexOf(d,c)>=0})})},Z.difference=function(b){var a=aw.apply(af,ac.call(arguments,1));return Z.filter(b,function(c){return !Z.contains(a,c)})},Z.zip=function(){for(var c=ac.call(arguments),a=Z.max(Z.pluck(c,"length")),d=new Array(a),b=0;a>b;b++){d[b]=Z.pluck(c,""+b)}return d},Z.object=function(d,b){if(null==d){return{}}for(var f={},c=0,a=d.length;a>c;c++){b?f[d[c]]=b[c]:f[d[c][0]]=d[c][1]}return f},Z.indexOf=function(d,b,f){if(null==d){return -1}var c=0,a=d.length;if(f){if("number"!=typeof f){return c=Z.sortedIndex(d,b),d[c]===b?c:-1}c=0>f?Math.max(0,a+f):f}if(Y&&d.indexOf===Y){return d.indexOf(b,f)}for(;a>c;c++){if(d[c]===b){return c}}return -1},Z.lastIndexOf=function(d,b,f){if(null==d){return -1}var c=null!=f;if(av&&d.lastIndexOf===av){return c?d.lastIndexOf(b,f):d.lastIndexOf(b)}for(var a=c?f:d.length;a--;){if(d[a]===b){return a}}return -1},Z.range=function(f,b,g){arguments.length<=1&&(b=f||0,f=0),g=arguments[2]||1;for(var d=Math.max(Math.ceil((b-f)/g),0),a=0,c=new Array(d);d>a;){c[a++]=f,f+=g}return c},Z.bind=function(b,a){if(b.bind===z&&z){return z.apply(b,ac.call(arguments,1))}var c=ac.call(arguments,2);return function(){return b.apply(a,c.concat(ac.call(arguments)))}},Z.partial=function(b){var a=ac.call(arguments,1);return function(){return b.apply(this,a.concat(ac.call(arguments)))}},Z.bindAll=function(b){var a=ac.call(arguments,1);return 0===a.length&&(a=Z.functions(b)),q(a,function(c){b[c]=Z.bind(b[c],b)}),b},Z.memoize=function(b,a){var c={};return a||(a=Z.identity),function(){var d=a.apply(this,arguments);return Z.has(c,d)?c[d]:c[d]=b.apply(this,arguments)}},Z.delay=function(b,a){var c=ac.call(arguments,2);return setTimeout(function(){return b.apply(null,c)},a)},Z.defer=function(a){return Z.delay.apply(Z,[a,1].concat(ac.call(arguments,1)))},Z.throttle=function(g,c){var j,f,b,d,h=0,a=function(){h=new Date,b=null,d=g.apply(j,f)};return function(){var e=new Date,i=c-(e-h);return j=this,f=arguments,0>=i?(clearTimeout(b),b=null,h=e,d=g.apply(j,f)):b||(b=setTimeout(a,i)),d}},Z.debounce=function(d,b,f){var c,a;return function(){var h=this,i=arguments,g=function(){c=null,f||(a=d.apply(h,i))},e=f&&!c;return clearTimeout(c),c=setTimeout(g,b),e&&(a=d.apply(h,i)),a}},Z.once=function(b){var a,c=!1;return function(){return c?a:(c=!0,a=b.apply(this,arguments),b=null,a)}},Z.wrap=function(b,a){return function(){var c=[b];return ah.apply(c,arguments),a.apply(this,c)}},Z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--){b=[a[c].apply(this,b)]}return b[0]}},Z.after=function(b,a){return 0>=b?a():function(){return --b<1?a.apply(this,arguments):void 0}},Z.keys=R||function(b){if(b!==Object(b)){throw new TypeError("Invalid object")}var a=[];for(var c in b){Z.has(b,c)&&(a[a.length]=c)}return a},Z.values=function(b){var a=[];for(var c in b){Z.has(b,c)&&a.push(b[c])}return a},Z.pairs=function(b){var a=[];for(var c in b){Z.has(b,c)&&a.push([c,b[c]])}return a},Z.invert=function(b){var a={};for(var c in b){Z.has(b,c)&&(a[b[c]]=c)}return a},Z.functions=Z.methods=function(b){var a=[];for(var c in b){Z.isFunction(b[c])&&a.push(c)}return a.sort()},Z.extend=function(a){return q(ac.call(arguments,1),function(b){if(b){for(var c in b){a[c]=b[c]}}}),a},Z.pick=function(b){var a={},c=aw.apply(af,ac.call(arguments,1));return q(c,function(d){d in b&&(a[d]=b[d])}),a},Z.omit=function(c){var b={},d=aw.apply(af,ac.call(arguments,1));for(var a in c){Z.contains(d,a)||(b[a]=c[a])}return b},Z.defaults=function(a){return q(ac.call(arguments,1),function(b){if(b){for(var c in b){null==a[c]&&(a[c]=b[c])}}}),a},Z.clone=function(a){return Z.isObject(a)?Z.isArray(a)?a.slice():Z.extend({},a):a},Z.tap=function(b,a){return a(b),b};var G=function(j,v,f,b){if(j===v){return 0!==j||1/j==1/v}if(null==j||null==v){return j===v}j instanceof Z&&(j=j._wrapped),v instanceof Z&&(v=v._wrapped);var h=aq.call(j);if(h!=aq.call(v)){return !1}switch(h){case"[object String]":return j==String(v);case"[object Number]":return j!=+j?v!=+v:0==j?1/j==1/v:j==+v;case"[object Date]":case"[object Boolean]":return +j==+v;case"[object RegExp]":return j.source==v.source&&j.global==v.global&&j.multiline==v.multiline&&j.ignoreCase==v.ignoreCase}if("object"!=typeof j||"object"!=typeof v){return !1}for(var w=f.length;w--;){if(f[w]==j){return b[w]==v}}f.push(j),b.push(v);var d=0,p=!0;if("[object Array]"==h){if(d=j.length,p=d==v.length){for(;d--&&(p=G(j[d],v[d],f,b));){}}}else{var m=j.constructor,g=v.constructor;if(m!==g&&!(Z.isFunction(m)&&m instanceof m&&Z.isFunction(g)&&g instanceof g)){return !1}for(var k in j){if(Z.has(j,k)&&(d++,!(p=Z.has(v,k)&&G(j[k],v[k],f,b)))){break}}if(p){for(k in v){if(Z.has(v,k)&&!(d--)){break}}p=!d}}return f.pop(),b.pop(),p};Z.isEqual=function(b,a){return G(b,a,[],[])},Z.isEmpty=function(b){if(null==b){return !0}if(Z.isArray(b)||Z.isString(b)){return 0===b.length}for(var a in b){if(Z.has(b,a)){return !1}}return !0},Z.isElement=function(a){return !(!a||1!==a.nodeType)},Z.isArray=aa||function(a){return"[object Array]"==aq.call(a)},Z.isObject=function(a){return a===Object(a)},q(["Arguments","Function","String","Number","Date","RegExp"],function(a){Z["is"+a]=function(b){return aq.call(b)=="[object "+a+"]"}}),Z.isArguments(arguments)||(Z.isArguments=function(a){return !(!a||!Z.has(a,"callee"))}),"function"!=typeof/./&&(Z.isFunction=function(a){return"function"==typeof a}),Z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},Z.isNaN=function(a){return Z.isNumber(a)&&a!=+a},Z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==aq.call(a)},Z.isNull=function(a){return null===a},Z.isUndefined=function(a){return void 0===a},Z.has=function(b,a){return ak.call(b,a)},Z.noConflict=function(){return ar._=ad,this},Z.identity=function(a){return a},Z.times=function(d,b,f){for(var c=Array(d),a=0;d>a;a++){c[a]=b.call(f,a)}return c},Z.random=function(b,a){return null==a&&(a=b,b=0),b+Math.floor(Math.random()*(a-b+1))};var J={escape:{"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};J.unescape=Z.invert(J.escape);var ax={escape:new RegExp("["+Z.keys(J.escape).join("")+"]","g"),unescape:new RegExp("("+Z.keys(J.unescape).join("|")+")","g")};Z.each(["escape","unescape"],function(a){Z[a]=function(b){return null==b?"":(""+b).replace(ax[a],function(c){return J[a][c]})}}),Z.result=function(b,a){if(null==b){return null}var c=b[a];return Z.isFunction(c)?c.call(b):c},Z.mixin=function(a){q(Z.functions(a),function(b){var c=Z[b]=a[b];Z.prototype[b]=function(){var d=[this._wrapped];return ah.apply(d,arguments),am.call(this,c.apply(Z,d))}})};var U=0;Z.uniqueId=function(b){var a=++U+"";return b?b+a:a},Z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,Q={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\t|\u2028|\u2029/g;Z.template=function(g,k,d){var b;d=Z.defaults({},d,Z.templateSettings);var f=new RegExp([(d.escape||F).source,(d.interpolate||F).source,(d.evaluate||F).source].join("|")+"|$","g"),l=0,c="__p+='";g.replace(f,function(m,p,o,e,a){return c+=g.slice(l,a).replace(W,function(i){return"\\"+Q[i]}),p&&(c+="'+\n((__t=("+p+"))==null?'':_.escape(__t))+\n'"),o&&(c+="'+\n((__t=("+o+"))==null?'':__t)+\n'"),e&&(c+="';\n"+e+"\n__p+='"),l=a+m.length,m}),c+="';\n",d.variable||(c="with(obj||{}){\n"+c+"}\n"),c="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+c+"return __p;\n";try{b=new Function(d.variable||"obj","_",c)}catch(j){throw j.source=c,j}if(k){return b(k,Z)}var h=function(a){return b.call(this,a,Z)};return h.source="function("+(d.variable||"obj")+"){\n"+c+"}",h},Z.chain=function(a){return Z(a).chain()};var am=function(a){return this._chain?Z(a).chain():a};Z.mixin(Z),q(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=af[b];Z.prototype[b]=function(){var c=this._wrapped;return a.apply(c,arguments),"shift"!=b&&"splice"!=b||0!==c.length||delete c[0],am.call(this,c)}}),q(["concat","join","slice"],function(b){var a=af[b];Z.prototype[b]=function(){return am.call(this,a.apply(this._wrapped,arguments))}}),Z.extend(Z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(c){c.Parse=c.Parse||{};var a=c.Parse;"undefined"!=typeof exports&&exports._?(a._=exports._.noConflict(),a.localStorage=require("localStorage"),a.XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest,exports.Parse=a):(a._=_.noConflict(),"undefined"!=typeof localStorage&&(a.localStorage=localStorage),"undefined"!=typeof XMLHttpRequest&&(a.XMLHttpRequest=XMLHttpRequest)),"undefined"!=typeof $&&(a.$=$);var d=function(){},b=function(j,h,f){var g;return g=h&&h.hasOwnProperty("constructor")?h.constructor:function(){j.apply(this,arguments)},a._.extend(g,j),d.prototype=j.prototype,g.prototype=new d,h&&a._.extend(g.prototype,h),f&&a._.extend(g,f),g.prototype.constructor=g,g.__super__=j.prototype,g};a.serverURL="https://api.parse.com","undefined"!=typeof process&&process.versions&&process.versions.node&&(a._isNode=!0),a.initialize=function(g,h,f){if(f){throw"Parse.initialize() was passed a Master Key, which is only allowed from within Node.js."}a._initialize(g,h)},a._initialize=function(g,h,f){a.applicationId=g,a.javaScriptKey=h,a.masterKey=f,a._useMasterKey=!1},a._isNode&&(a.initialize=a._initialize,a.Cloud=a.Cloud||{},a.Cloud.useMasterKey=function(){a._useMasterKey=!0}),a._getParsePath=function(f){if(!a.applicationId){throw"You need to call Parse.initialize before using Parse."}if(f||(f=""),!a._.isString(f)){throw"Tried to get a localStorage path that wasn't a String."}return"/"===f[0]&&(f=f.substring(1)),"Parse/"+a.applicationId+"/"+f},a._installationId=null,a._getInstallationId=function(){if(a._installationId){return a._installationId}var f=a._getParsePath("installationId");if(a._installationId=a.localStorage.getItem(f),!a._installationId||""===a._installationId){var g=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};a._installationId=g()+g()+"-"+g()+"-"+g()+"-"+g()+"-"+g()+g()+g(),a.localStorage.setItem(f,a._installationId)}return a._installationId},a._parseDate=function(m){var v=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$"),j=v.exec(m);if(!j){return null}var g=j[1]||0,k=(j[2]||1)-1,w=j[3]||0,h=j[4]||0,q=j[5]||0,p=j[6]||0,l=j[8]||0;return new Date(Date.UTC(g,k,w,h,q,p,l))},a._ajaxIE8=function(j,k,h){var f=new a.Promise,g=new XDomainRequest;return g.onload=function(){var l;try{l=JSON.parse(g.responseText)}catch(i){f.reject(i)}l&&f.resolve(l)},g.onerror=g.ontimeout=function(){var i={responseText:JSON.stringify({code:a.Error.X_DOMAIN_REQUEST,error:"IE's XDomainRequest does not supply error info."})};f.reject(i)},g.onprogress=function(){},g.open(j,k),g.send(h),f},a._useXDomainRequest=function(){return"undefined"!=typeof XDomainRequest?"withCredentials" in new XMLHttpRequest?!1:!0:!1},a._ajax=function(m,j,g,k,t){var h={success:k,error:t};if(a._useXDomainRequest()){return a._ajaxIE8(m,j,g)._thenRunCallbacks(h)}var q=new a.Promise,p=!1,l=new a.XMLHttpRequest;return l.onreadystatechange=function(){if(4===l.readyState){if(p){return}if(p=!0,l.status>=200&&l.status<300){var i;try{i=JSON.parse(l.responseText)}catch(f){q.reject(f)}i&&q.resolve(i,l.status,l)}else{q.reject(l)}}},l.open(m,j,!0),l.setRequestHeader("Content-Type","text/plain"),a._isNode&&l.setRequestHeader("User-Agent","Parse/"+a.VERSION+" (NodeJS "+process.versions.node+")"),l.send(g),q._thenRunCallbacks(h)},a._extend=function(g,f){var h=b(this,g,f);return h.extend=this.extend,h},a._request=function(q){var j=q.route,g=q.className,m=q.objectId,x=q.method,h=q.useMasterKey,w=q.sessionToken,v=q.data;if(!a.applicationId){throw"You must specify your applicationId using Parse.initialize."}if(!a.javaScriptKey&&!a.masterKey){throw"You must specify a key using Parse.initialize."}if(!w){var p=a.User.current();p&&p._sessionToken&&(w=p._sessionToken)}if("batch"!==j&&"classes"!==j&&"events"!==j&&"files"!==j&&"functions"!==j&&"login"!==j&&"push"!==j&&"requestPasswordReset"!==j&&"rest_verify_analytics"!==j&&"users"!==j&&"jobs"!==j&&"config"!==j){throw"Bad route: '"+j+"'."}var k=a.serverURL;"/"!==k.charAt(k.length-1)&&(k+="/"),k+="1/"+j,g&&(k+="/"+g),m&&(k+="/"+m),v=a._.clone(v||{}),"POST"!==x&&(v._method=x,x="POST"),a._.isUndefined(h)&&(h=a._useMasterKey),v._ApplicationId=a.applicationId,h?v._MasterKey=a.masterKey:v._JavaScriptKey=a.javaScriptKey,v._ClientVersion=a.VERSION,v._InstallationId=a._getInstallationId(),w&&(v._SessionToken=w);var t=JSON.stringify(v);return a._ajax(x,k,t).then(null,function(o){var s;if(o&&o.responseText){try{var l=JSON.parse(o.responseText);s=new a.Error(l.code,l.error)}catch(f){s=new a.Error(a.Error.INVALID_JSON,"Received an error with invalid JSON from Parse: "+o.responseText)}}else{s=new a.Error(a.Error.CONNECTION_FAILED,"XMLHttpRequest failed: "+JSON.stringify(o))}return a.Promise.error(s)})},a._getValue=function(f,g){return f&&f[g]?a._.isFunction(f[g])?f[g]():f[g]:null},a._encode=function(j,k,h){var f=a._;if(j instanceof a.Object){if(h){throw"Parse.Objects not allowed here"}if(!k||f.include(k,j)||!j._hasData){return j._toPointer()}if(!j.dirty()){return k=k.concat(j),a._encode(j._toFullJSON(k),k,h)}throw"Tried to save an object with a pointer to a new, unsaved object."}if(j instanceof a.ACL){return j.toJSON()}if(f.isDate(j)){return{__type:"Date",iso:j.toJSON()}}if(j instanceof a.GeoPoint){return j.toJSON()}if(f.isArray(j)){return f.map(j,function(i){return a._encode(i,k,h)})}if(f.isRegExp(j)){return j.source}if(j instanceof a.Relation){return j.toJSON()}if(j instanceof a.Op){return j.toJSON()}if(j instanceof a.File){if(!j.url()){throw"Tried to save an object containing an unsaved file."}return{__type:"File",name:j.name(),url:j.url()}}if(f.isObject(j)){var g={};return a._objectEach(j,function(m,l){g[l]=a._encode(m,k,h)}),g}return j},a._decode=function(l,p){var k=a._;if(!k.isObject(p)){return p}if(k.isArray(p)){return a._arrayEach(p,function(n,i){p[i]=a._decode(i,n)}),p}if(p instanceof a.Object){return p}if(p instanceof a.File){return p}if(p instanceof a.Op){return p}if(p.__op){return a.Op._decode(p)}if("Pointer"===p.__type&&p.className){var h=a.Object._create(p.className);return h._finishFetch({objectId:p.objectId},!1),h}if("Object"===p.__type&&p.className){var j=p.className;delete p.__type,delete p.className;var m=a.Object._create(j);return m._finishFetch(p,!0),m}if("Date"===p.__type){return a._parseDate(p.iso)}if("GeoPoint"===p.__type){return new a.GeoPoint({latitude:p.latitude,longitude:p.longitude})}if("ACL"===l){return p instanceof a.ACL?p:new a.ACL(p)}if("Relation"===p.__type){var g=new a.Relation(null,l);return g.targetClassName=p.className,g}if("File"===p.__type){var f=new a.File(p.name);return f._url=p.url,f}return a._objectEach(p,function(n,i){p[i]=a._decode(i,n)}),p},a._arrayEach=a._.each,a._traverse=function(g,h,f){if(g instanceof a.Object){if(f=f||[],a._.indexOf(f,g)>=0){return}return f.push(g),a._traverse(g.attributes,h,f),h(g)}return g instanceof a.Relation||g instanceof a.File?h(g):a._.isArray(g)?(a._.each(g,function(e,j){var k=a._traverse(e,h,f);k&&(g[j]=k)}),h(g)):a._.isObject(g)?(a._each(g,function(e,j){var k=a._traverse(e,h,f);k&&(g[j]=k)}),h(g)):h(g)},a._objectEach=a._each=function(g,h){var f=a._;f.isObject(g)?f.each(f.keys(g),function(e){h(g[e],e)}):f.each(g,h)},a._isNullOrUndefined=function(f){return a._.isNull(f)||a._.isUndefined(f)}}(this),function(b){b.Parse=b.Parse||{};var a=b.Parse,c=a._;a.Analytics=a.Analytics||{},c.extend(a.Analytics,{track:function(g,f,d){if(g=g||"",g=g.replace(/^\s*/,""),g=g.replace(/\s*$/,""),0===g.length){throw"A name for the custom event must be provided"}return c.each(f,function(i,h){if(!c.isString(h)||!c.isString(i)){throw'track() dimensions expects keys and values of type "string".'}}),d=d||{},a._request({route:"events",className:g,method:"POST",data:{dimensions:f}})._thenRunCallbacks(d)}})}(this),function(b){b.Parse=b.Parse||{};var a=b.Parse,c=a._;a.Config=function(){this.attributes={},this._escapedAttributes={}},a.Config.current=function(){if(a.Config._currentConfig){return a.Config._currentConfig}var d=a.localStorage.getItem(a._getParsePath(a.Config._CURRENT_CONFIG_KEY)),f=new a.Config;return d&&(f._finishFetch(JSON.parse(d)),a.Config._currentConfig=f),f},a.Config.get=function(d){d=d||{};var f=a._request({route:"config",method:"GET"});return f.then(function(h){if(!h||!h.params){var i=new a.Error(a.Error.INVALID_JSON,"Config JSON response invalid.");return a.Promise.error(i)}var g=new a.Config;return g._finishFetch(h),a.Config._currentConfig=g,g})._thenRunCallbacks(d)},a.Config.prototype={escape:function(h){var g=this._escapedAttributes[h];if(g){return g}var d,f=this.attributes[h];return d=a._isNullOrUndefined(f)?"":c.escape(f.toString()),this._escapedAttributes[h]=d,d},get:function(d){return this.attributes[d]},_finishFetch:function(d){this.attributes=a._decode(null,c.clone(d.params)),a.localStorage.setItem(a._getParsePath(a.Config._CURRENT_CONFIG_KEY),JSON.stringify(d))}},a.Config._currentConfig=null,a.Config._CURRENT_CONFIG_KEY="currentConfig"}(this),function(b){b.Parse=b.Parse||{};var a=b.Parse,c=a._;a.Error=function(f,d){this.code=f,this.message=d},c.extend(a.Error,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,INVALID_EVENT_NAME:160,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,AGGREGATE_ERROR:600,FILE_READ_ERROR:601,X_DOMAIN_REQUEST:602})}(this),function(){var c=this,a=c.Parse||(c.Parse={}),d=/\s+/,b=Array.prototype.slice;a.Events={on:function(m,j,l){var h,k,n,g,f;if(!j){return this}for(m=m.split(d),h=this._callbacks||(this._callbacks={}),k=m.shift();k;){f=h[k],n=f?f.tail:{},n.next=g={},n.context=l,n.callback=j,h[k]={tail:g,next:f?f.next:n},k=m.shift()}return this},off:function(l,p,g){var j,q,h,n,m,k;if(q=this._callbacks){if(!(l||p||g)){return delete this._callbacks,this}for(l=l?l.split(d):_.keys(q),j=l.shift();j;){if(h=q[j],delete q[j],h&&(p||g)){for(n=h.tail,h=h.next;h!==n;){m=h.callback,k=h.context,(p&&m!==p||g&&k!==g)&&this.on(j,m,k),h=h.next}j=l.shift()}else{j=l.shift()}}return this}},trigger:function(n){var k,j,l,p,h,g,m;if(!(l=this._callbacks)){return this}for(g=l.all,n=n.split(d),m=b.call(arguments,1),k=n.shift();k;){if(j=l[k]){for(p=j.tail;(j=j.next)!==p;){j.callback.apply(j.context||this,m)}}if(j=g){for(p=j.tail,h=[k].concat(m);(j=j.next)!==p;){j.callback.apply(j.context||this,h)}}k=n.shift()}return this}},a.Events.bind=a.Events.on,a.Events.unbind=a.Events.off}.call(this),function(b){b.Parse=b.Parse||{};var a=b.Parse,c=a._;a.GeoPoint=function(g,f){c.isArray(g)?(a.GeoPoint._validate(g[0],g[1]),this.latitude=g[0],this.longitude=g[1]):c.isObject(g)?(a.GeoPoint._validate(g.latitude,g.longitude),this.latitude=g.latitude,this.longitude=g.longitude):c.isNumber(g)&&c.isNumber(f)?(a.GeoPoint._validate(g,f),this.latitude=g,this.longitude=f):(this.latitude=0,this.longitude=0);var d=this;this.__defineGetter__&&this.__defineSetter__&&(this._latitude=this.latitude,this._longitude=this.longitude,this.__defineGetter__("latitude",function(){return d._latitude}),this.__defineGetter__("longitude",function(){return d._longitude}),this.__defineSetter__("latitude",function(h){a.GeoPoint._validate(h,d.longitude),d._latitude=h}),this.__defineSetter__("longitude",function(h){a.GeoPoint._validate(d.latitude,h),d._longitude=h}))},a.GeoPoint._validate=function(f,d){if(-90>f){throw"Parse.GeoPoint latitude "+f+" < -90.0."}if(f>90){throw"Parse.GeoPoint latitude "+f+" > 90.0."}if(-180>d){throw"Parse.GeoPoint longitude "+d+" < -180.0."}if(d>180){throw"Parse.GeoPoint longitude "+d+" > 180.0."}},a.GeoPoint.current=function(d){var f=new a.Promise;return navigator.geolocation.getCurrentPosition(function(g){f.resolve(new a.GeoPoint({latitude:g.coords.latitude,longitude:g.coords.longitude}))},function(g){f.reject(g)}),f._thenRunCallbacks(d)},a.GeoPoint.prototype={toJSON:function(){return a.GeoPoint._validate(this.latitude,this.longitude),{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(p){var w=Math.PI/180,h=this.latitude*w,d=this.longitude*w,k=p.latitude*w,x=p.longitude*w,g=h-k,v=d-x,q=Math.sin(g/2),m=Math.sin(v/2),j=q*q+Math.cos(h)*Math.cos(k)*m*m;return j=Math.min(1,j),2*Math.asin(Math.sqrt(j))},kilometersTo:function(d){return 6371*this.radiansTo(d)},milesTo:function(d){return 3958.8*this.radiansTo(d)}}}(this),function(c){c.Parse=c.Parse||{};var a=c.Parse,d=a._,b="*";a.ACL=function(g){var f=this;if(f.permissionsById={},d.isObject(g)){if(g instanceof a.User){f.setReadAccess(g,!0),f.setWriteAccess(g,!0)}else{if(d.isFunction(g)){throw"Parse.ACL() called with a function.  Did you forget ()?"}a._objectEach(g,function(j,h){if(!d.isString(h)){throw"Tried to create an ACL with an invalid userId."}f.permissionsById[h]={},a._objectEach(j,function(k,i){if("read"!==i&&"write"!==i){throw"Tried to create an ACL with an invalid permission type."}if(!d.isBoolean(k)){throw"Tried to create an ACL with an invalid permission value."}f.permissionsById[h][i]=k})})}}},a.ACL.prototype.toJSON=function(){return d.clone(this.permissionsById)},a.ACL.prototype._setAccess=function(j,h,f){if(h instanceof a.User?h=h.id:h instanceof a.Role&&(h="role:"+h.getName()),!d.isString(h)){throw"userId must be a string."}if(!d.isBoolean(f)){throw"allowed must be either true or false."}var g=this.permissionsById[h];if(!g){if(!f){return}g={},this.permissionsById[h]=g}f?this.permissionsById[h][j]=!0:(delete g[j],d.isEmpty(g)&&delete g[h])},a.ACL.prototype._getAccess=function(g,h){h instanceof a.User?h=h.id:h instanceof a.Role&&(h="role:"+h.getName());var f=this.permissionsById[h];return f?f[g]?!0:!1:!1},a.ACL.prototype.setReadAccess=function(g,f){this._setAccess("read",g,f)},a.ACL.prototype.getReadAccess=function(f){return this._getAccess("read",f)},a.ACL.prototype.setWriteAccess=function(g,f){this._setAccess("write",g,f)},a.ACL.prototype.getWriteAccess=function(f){return this._getAccess("write",f)},a.ACL.prototype.setPublicReadAccess=function(f){this.setReadAccess(b,f)},a.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(b)},a.ACL.prototype.setPublicWriteAccess=function(f){this.setWriteAccess(b,f)},a.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(b)},a.ACL.prototype.getRoleReadAccess=function(f){if(f instanceof a.Role&&(f=f.getName()),d.isString(f)){return this.getReadAccess("role:"+f)}throw"role must be a Parse.Role or a String"},a.ACL.prototype.getRoleWriteAccess=function(f){if(f instanceof a.Role&&(f=f.getName()),d.isString(f)){return this.getWriteAccess("role:"+f)}throw"role must be a Parse.Role or a String"},a.ACL.prototype.setRoleReadAccess=function(g,f){if(g instanceof a.Role&&(g=g.getName()),d.isString(g)){return this.setReadAccess("role:"+g,f),void 0}throw"role must be a Parse.Role or a String"},a.ACL.prototype.setRoleWriteAccess=function(g,f){if(g instanceof a.Role&&(g=g.getName()),d.isString(g)){return this.setWriteAccess("role:"+g,f),void 0}throw"role must be a Parse.Role or a String"}}(this),function(b){b.Parse=b.Parse||{};var a=b.Parse,c=a._;a.Op=function(){this._initialize.apply(this,arguments)},a.Op.prototype={_initialize:function(){}},c.extend(a.Op,{_extend:a._extend,_opDecoderMap:{},_registerDecoder:function(d,f){a.Op._opDecoderMap[d]=f},_decode:function(d){var f=a.Op._opDecoderMap[d.__op];return f?f(d):void 0}}),a.Op._registerDecoder("Batch",function(d){var f=null;return a._arrayEach(d.ops,function(g){g=a.Op._decode(g),f=g._mergeWithPrevious(f)}),f}),a.Op.Set=a.Op._extend({_initialize:function(d){this._value=d},value:function(){return this._value},toJSON:function(){return a._encode(this.value())},_mergeWithPrevious:function(){return this},_estimate:function(){return this.value()}}),a.Op._UNSET={},a.Op.Unset=a.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(){return this},_estimate:function(){return a.Op._UNSET}}),a.Op._registerDecoder("Delete",function(){return new a.Op.Unset}),a.Op.Increment=a.Op._extend({_initialize:function(d){this._amount=d},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(d){if(d){if(d instanceof a.Op.Unset){return new a.Op.Set(this.amount())}if(d instanceof a.Op.Set){return new a.Op.Set(d.value()+this.amount())}if(d instanceof a.Op.Increment){return new a.Op.Increment(this.amount()+d.amount())}throw"Op is invalid after previous op."}return this},_estimate:function(d){return d?d+this.amount():this.amount()}}),a.Op._registerDecoder("Increment",function(d){return new a.Op.Increment(d.amount)}),a.Op.Add=a.Op._extend({_initialize:function(d){this._objects=d},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:a._encode(this.objects())}},_mergeWithPrevious:function(d){if(d){if(d instanceof a.Op.Unset){return new a.Op.Set(this.objects())}if(d instanceof a.Op.Set){return new a.Op.Set(this._estimate(d.value()))}if(d instanceof a.Op.Add){return new a.Op.Add(d.objects().concat(this.objects()))}throw"Op is invalid after previous op."}return this},_estimate:function(d){return d?d.concat(this.objects()):c.clone(this.objects())}}),a.Op._registerDecoder("Add",function(d){return new a.Op.Add(a._decode(void 0,d.objects))}),a.Op.AddUnique=a.Op._extend({_initialize:function(d){this._objects=c.uniq(d)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:a._encode(this.objects())}},_mergeWithPrevious:function(d){if(d){if(d instanceof a.Op.Unset){return new a.Op.Set(this.objects())}if(d instanceof a.Op.Set){return new a.Op.Set(this._estimate(d.value()))}if(d instanceof a.Op.AddUnique){return new a.Op.AddUnique(this._estimate(d.objects()))}throw"Op is invalid after previous op."}return this},_estimate:function(f){if(f){var d=c.clone(f);return a._arrayEach(this.objects(),function(j){if(j instanceof a.Object&&j.id){var g=c.find(d,function(e){return e instanceof a.Object&&e.id===j.id});if(g){var h=c.indexOf(d,g);d[h]=j}else{d.push(j)}}else{c.contains(d,j)||d.push(j)}}),d}return c.clone(this.objects())}}),a.Op._registerDecoder("AddUnique",function(d){return new a.Op.AddUnique(a._decode(void 0,d.objects))}),a.Op.Remove=a.Op._extend({_initialize:function(d){this._objects=c.uniq(d)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:a._encode(this.objects())}},_mergeWithPrevious:function(d){if(d){if(d instanceof a.Op.Unset){return d}if(d instanceof a.Op.Set){return new a.Op.Set(this._estimate(d.value()))}if(d instanceof a.Op.Remove){return new a.Op.Remove(c.union(d.objects(),this.objects()))}throw"Op is invalid after previous op."}return this},_estimate:function(f){if(f){var d=c.difference(f,this.objects());return a._arrayEach(this.objects(),function(g){g instanceof a.Object&&g.id&&(d=c.reject(d,function(e){return e instanceof a.Object&&e.id===g.id}))}),d}return[]}}),a.Op._registerDecoder("Remove",function(d){return new a.Op.Remove(a._decode(void 0,d.objects))}),a.Op.Relation=a.Op._extend({_initialize:function(h,g){this._targetClassName=null;var d=this,f=function(i){if(i instanceof a.Object){if(!i.id){throw"You can't add an unsaved Parse.Object to a relation."}if(d._targetClassName||(d._targetClassName=i.className),d._targetClassName!==i.className){throw"Tried to create a Parse.Relation with 2 different types: "+d._targetClassName+" and "+i.className+"."}return i.id}return i};this.relationsToAdd=c.uniq(c.map(h,f)),this.relationsToRemove=c.uniq(c.map(g,f))},added:function(){var d=this;return c.map(this.relationsToAdd,function(f){var e=a.Object._create(d._targetClassName);return e.id=f,e})},removed:function(){var d=this;return c.map(this.relationsToRemove,function(f){var e=a.Object._create(d._targetClassName);return e.id=f,e})},toJSON:function(){var j=null,f=null,h=this,d=function(i){return{__type:"Pointer",className:h._targetClassName,objectId:i}},g=null;return this.relationsToAdd.length>0&&(g=c.map(this.relationsToAdd,d),j={__op:"AddRelation",objects:g}),this.relationsToRemove.length>0&&(g=c.map(this.relationsToRemove,d),f={__op:"RemoveRelation",objects:g}),j&&f?{__op:"Batch",ops:[j,f]}:j||f||{}},_mergeWithPrevious:function(h){if(h){if(h instanceof a.Op.Unset){throw"You can't modify a relation after deleting it."}if(h instanceof a.Op.Relation){if(h._targetClassName&&h._targetClassName!==this._targetClassName){throw"Related object must be of class "+h._targetClassName+", but "+this._targetClassName+" was passed in."}var g=c.union(c.difference(h.relationsToAdd,this.relationsToRemove),this.relationsToAdd),d=c.union(c.difference(h.relationsToRemove,this.relationsToAdd),this.relationsToRemove),f=new a.Op.Relation(g,d);return f._targetClassName=this._targetClassName,f}throw"Op is invalid after previous op."}return this},_estimate:function(g,h,f){if(g){if(g instanceof a.Relation){if(this._targetClassName){if(g.targetClassName){if(g.targetClassName!==this._targetClassName){throw"Related object must be a "+g.targetClassName+", but a "+this._targetClassName+" was passed in."}}else{g.targetClassName=this._targetClassName}}return g}throw"Op is invalid after previous op."}var d=new a.Relation(h,f);d.targetClassName=this._targetClassName}}),a.Op._registerDecoder("AddRelation",function(d){return new a.Op.Relation(a._decode(void 0,d.objects),[])}),a.Op._registerDecoder("RemoveRelation",function(d){return new a.Op.Relation([],a._decode(void 0,d.objects))})}(this),function(b){b.Parse=b.Parse||{};var a=b.Parse,c=a._;a.Relation=function(f,d){this.parent=f,this.key=d,this.targetClassName=null},a.Relation.prototype={_ensureParentAndKey:function(f,d){if(this.parent=this.parent||f,this.key=this.key||d,this.parent!==f){throw"Internal Error. Relation retrieved from two different Objects."}if(this.key!==d){throw"Internal Error. Relation retrieved from two different keys."}},add:function(f){c.isArray(f)||(f=[f]);var d=new a.Op.Relation(f,[]);this.parent.set(this.key,d),this.targetClassName=d._targetClassName},remove:function(f){c.isArray(f)||(f=[f]);var d=new a.Op.Relation([],f);this.parent.set(this.key,d),this.targetClassName=d._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var d,f;return this.targetClassName?(d=a.Object._getSubclass(this.targetClassName),f=new a.Query(d)):(d=a.Object._getSubclass(this.parent.className),f=new a.Query(d),f._extraOptions.redirectClassNameForKey=this.key),f._addCondition("$relatedTo","object",this.parent._toPointer()),f._addCondition("$relatedTo","key",this.key),f}}}(this),function(b){b.Parse=b.Parse||{};var a=b.Parse,c=a._;a.Promise=function(){this._resolved=!1,this._rejected=!1,this._resolvedCallbacks=[],this._rejectedCallbacks=[]},c.extend(a.Promise,{_isPromisesAPlusCompliant:!1,is:function(d){return d&&d.then&&c.isFunction(d.then)},as:function(){var d=new a.Promise;return d.resolve.apply(d,arguments),d},error:function(){var d=new a.Promise;return d.reject.apply(d,arguments),d},when:function(k){var m;m=k&&a._isNullOrUndefined(k.length)?arguments:k;var j=m.length,g=!1,h=[],l=[];if(h.length=m.length,l.length=m.length,0===j){return a.Promise.as.apply(this,h)}var f=new a.Promise,d=function(){j-=1,0===j&&(g?f.reject(l):f.resolve.apply(f,h))};return a._arrayEach(m,function(i,o){a.Promise.is(i)?i.then(function(n){h[o]=n,d()},function(n){l[o]=n,g=!0,d()}):(h[o]=i,d())}),f},_continueWhile:function(d,f){return d()?f().then(function(){return a.Promise._continueWhile(d,f)}):a.Promise.as()}}),c.extend(a.Promise.prototype,{resolve:function(){if(this._resolved||this._rejected){throw"A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._resolved=!0,this._result=arguments;var d=arguments;a._arrayEach(this._resolvedCallbacks,function(e){e.apply(this,d)}),this._resolvedCallbacks=[],this._rejectedCallbacks=[]},reject:function(d){if(this._resolved||this._rejected){throw"A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._rejected=!0,this._error=d,a._arrayEach(this._rejectedCallbacks,function(e){e(d)}),this._resolvedCallbacks=[],this._rejectedCallbacks=[]},then:function(j,l){var h=new a.Promise,f=function(){var m=arguments;if(j){if(a.Promise._isPromisesAPlusCompliant){try{m=[j.apply(this,m)]}catch(e){m=[a.Promise.error(e)]}}else{m=[j.apply(this,m)]}}1===m.length&&a.Promise.is(m[0])?m[0].then(function(){h.resolve.apply(h,arguments)},function(i){h.reject(i)}):h.resolve.apply(h,m)},g=function(o){var m=[];if(l){if(a.Promise._isPromisesAPlusCompliant){try{m=[l(o)]}catch(n){m=[a.Promise.error(n)]}}else{m=[l(o)]}1===m.length&&a.Promise.is(m[0])?m[0].then(function(){h.resolve.apply(h,arguments)},function(i){h.reject(i)}):a.Promise._isPromisesAPlusCompliant?h.resolve.apply(h,m):h.reject(m[0])}else{h.reject(o)}},k=function(i){i.call()};a.Promise._isPromisesAPlusCompliant&&("undefined"!=typeof window&&window.setTimeout?k=function(i){window.setTimeout(i,0)}:"undefined"!=typeof process&&process.nextTick&&(k=function(i){process.nextTick(i)}));var d=this;return this._resolved?k(function(){f.apply(d,d._result)}):this._rejected?k(function(){g(d._error)}):(this._resolvedCallbacks.push(f),this._rejectedCallbacks.push(g)),h},always:function(d){return this.then(d,d)},done:function(d){return this.then(d)},fail:function(d){return this.then(null,d)},_thenRunCallbacks:function(h,g){var d;if(c.isFunction(h)){var f=h;d={success:function(i){f(i,null)},error:function(i){f(null,i)}}}else{d=c.clone(h)}return d=d||{},this.then(function(i){return d.success?d.success.apply(this,arguments):g&&g.trigger("sync",g,i,d),a.Promise.as.apply(a.Promise,arguments)},function(i){return d.error?c.isUndefined(g)?d.error(i):d.error(g,i):g&&g.trigger("error",g,i,d),a.Promise.error(i)})},_continueWith:function(d){return this.then(function(){return d(arguments,null)},function(e){return d(null,e)})}})}(this),function(f){f.Parse=f.Parse||{};var b=f.Parse,h=b._,d=function(i){if(26>i){return String.fromCharCode(65+i)}if(52>i){return String.fromCharCode(97+(i-26))}if(62>i){return String.fromCharCode(48+(i-52))}if(62===i){return"+"}if(63===i){return"/"}throw"Tried to encode large digit "+i+" in base64."},a=function(j){var i=[];return i.length=Math.ceil(j.length/3),h.times(i.length,function(q){var k=j[3*q],l=j[3*q+1]||0,p=j[3*q+2]||0,e=3*q+1<j.length,m=3*q+2<j.length;i[q]=[d(63&k>>2),d(48&k<<4|15&l>>4),e?d(60&l<<2|3&p>>6):"=",m?d(63&p):"="].join("")}),i.join("")},c={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"},g=function(l,m){var k=new b.Promise;if("undefined"==typeof FileReader){return b.Promise.error(new b.Error(b.Error.FILE_READ_ERROR,"Attempted to use a FileReader on an unsupported browser."))}var j=new FileReader;return j.onloadend=function(){if(2!==j.readyState){return k.reject(new b.Error(b.Error.FILE_READ_ERROR,"Error reading file.")),void 0}var n=j.result,i=/^data:([^;]*);base64,(.*)$/.exec(n);return i?(k.resolve(i[2],m||i[1]),void 0):(k.reject(new b.Error(b.ERROR.FILE_READ_ERROR,"Unable to interpret data URL: "+n)),void 0)},j.readAsDataURL(l),k};b.File=function(q,n,k){this._name=q;var j=/\.([^.]*)$/.exec(q);j&&(j=j[1].toLowerCase());var i=k||c[j]||"text/plain";if(h.isArray(n)){this._source=b.Promise.as(a(n),i)}else{if(n&&n.base64){var m=/^data:([a-zA-Z]*\/[a-zA-Z+.-]*);(charset=[a-zA-Z0-9\-\/\s]*,)?base64,(\S+)/,o=m.exec(n.base64);this._source=o&&o.length>0?b.Promise.as(4===o.length?o[3]:o[2],o[1]):b.Promise.as(n.base64,i)}else{if("undefined"!=typeof File&&n instanceof File){this._source=g(n,k)}else{if(h.isString(n)){throw"Creating a Parse.File from a String is not yet supported."}}}}},b.File.prototype={name:function(){return this._name},url:function(){return this._url},save:function(i){i=i||{};var j=this;return j._previousSave||(j._previousSave=j._source.then(function(l,e){var k={base64:l,_ContentType:e};return b._request({route:"files",className:j._name,method:"POST",data:k,useMasterKey:i.useMasterKey})}).then(function(k){return j._name=k.name,j._url=k.url,j})),j._previousSave._thenRunCallbacks(i)}}}(this),function(b){b.Parse=b.Parse||{};var a=b.Parse,c=a._;a.Object=function(g,f){if(c.isString(g)){return a.Object._create.apply(this,arguments)}g=g||{},f&&f.parse&&(g=this.parse(g));var d=a._getValue(this,"defaults");if(d&&(g=c.extend({},d,g)),f&&f.collection&&(this.collection=f.collection),this._serverData={},this._opSetQueue=[{}],this.attributes={},this._hashedJSON={},this._escapedAttributes={},this.cid=c.uniqueId("c"),this.changed={},this._silent={},this._pending={},!this.set(g,{silent:!0})){throw new Error("Can't create an invalid Parse.Object")}this.changed={},this._silent={},this._pending={},this._hasData=!0,this._previousAttributes=c.clone(this.attributes),this.initialize.apply(this,arguments)},a.Object.saveAll=function(d,f){return f=f||{},a.Object._deepSaveAsync(d,{useMasterKey:f.useMasterKey})._thenRunCallbacks(f)},a.Object.destroyAll=function(k,j){j=j||{};var g=function(i){i.trigger("destroy",i,i.collection,j)},h=[],l=function(i){var m=a.Promise.as();return i.length>0&&(m=m.then(function(){return a._request({route:"batch",method:"POST",useMasterKey:j.useMasterKey,data:{requests:c.map(i,function(n){return{method:"DELETE",path:"/1/classes/"+n.className+"/"+n.id}})}})}).then(function(e){a._arrayEach(i,function(p,q){if(e[q].success&&j.wait){g(p)}else{if(e[q].error){var n=new a.Error(e[q].error.code,e[q].error.error);n.object=p,h.push(n)}}})})),m},f=a.Promise.as(),d=[];return a._arrayEach(k,function(e,m){if(e.id&&j.wait||g(e),e.id&&d.push(e),20===d.length||m+1===k.length){var i=d;d=[],f=f.then(function(){return l(i)})}}),f.then(function(){if(0===h.length){return !0}var i=new a.Error(a.Error.AGGREGATE_ERROR,"Error deleting an object in destroyAll");return i.errors=h,a.Promise.error(i)})._thenRunCallbacks(j)},a.Object.fetchAll=function(d,f){return a.Object._fetchAll(d,!0)._thenRunCallbacks(f)},a.Object.fetchAllIfNeeded=function(d,f){return a.Object._fetchAll(d,!1)._thenRunCallbacks(f)},c.extend(a.Object.prototype,a.Events,{_existed:!1,initialize:function(){},toJSON:function(){var d=this._toFullJSON();return a._arrayEach(["__type","className"],function(e){delete d[e]}),d},_toFullJSON:function(f){var d=c.clone(this.attributes);return a._objectEach(d,function(g,e){d[e]=a._encode(g,f)}),a._objectEach(this._operations,function(h,g){d[g]=h}),c.has(this,"id")&&(d.objectId=this.id),c.has(this,"createdAt")&&(d.createdAt=c.isDate(this.createdAt)?this.createdAt.toJSON():this.createdAt),c.has(this,"updatedAt")&&(d.updatedAt=c.isDate(this.updatedAt)?this.updatedAt.toJSON():this.updatedAt),d.__type="Object",d.className=this.className,d},_refreshCache:function(){var d=this;d._refreshingCache||(d._refreshingCache=!0,a._objectEach(this.attributes,function(f,e){f instanceof a.Object?f._refreshCache():c.isObject(f)&&d._resetCacheForKey(e)&&d.set(e,new a.Op.Set(f),{silent:!0})}),delete d._refreshingCache)},dirty:function(f){this._refreshCache();var d=c.last(this._opSetQueue);return f?d[f]?!0:!1:this.id?c.keys(d).length>0?!0:!1:!0},dirtyKeys:function(){return c.keys(c.last(this._opSetQueue))},_toPointer:function(){if(!this.id){throw new Error("Can't serialize an unsaved Parse.Object")}return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(d){return this.attributes[d]},relation:function(d){var f=this.get(d);if(f){if(!(f instanceof a.Relation)){throw"Called relation() on non-relation field "+d}return f._ensureParentAndKey(this,d),f}return new a.Relation(this,d)},escape:function(h){var g=this._escapedAttributes[h];if(g){return g}var d,f=this.attributes[h];return d=a._isNullOrUndefined(f)?"":c.escape(f.toString()),this._escapedAttributes[h]=d,d},has:function(d){return !a._isNullOrUndefined(this.attributes[d])},_mergeMagicFields:function(g){var f=this,d=["id","objectId","createdAt","updatedAt"];a._arrayEach(d,function(e){g[e]&&("objectId"===e?f.id=g[e]:f[e]="createdAt"!==e&&"updatedAt"!==e||c.isDate(g[e])?g[e]:a._parseDate(g[e]),delete g[e])})},_copyServerData:function(d){var f={};a._objectEach(d,function(h,g){f[g]=a._decode(g,h)}),this._serverData=f,this._rebuildAllEstimatedData(),this._refreshCache(),this._opSetQueue=[{}],this._rebuildAllEstimatedData()},_mergeFromObject:function(d){d&&(this.id=d.id,this.createdAt=d.createdAt,this.updatedAt=d.updatedAt,this._copyServerData(d._serverData),this._hasData=!0)},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var f=c.first(this._opSetQueue);this._opSetQueue=c.rest(this._opSetQueue);var d=c.first(this._opSetQueue);a._objectEach(f,function(g,j){var e=f[j],h=d[j];e&&h?d[j]=h._mergeWithPrevious(e):e&&(d[j]=e)}),this._saving=this._saving-1},_finishSave:function(h){var g={};a._traverse(this.attributes,function(i){i instanceof a.Object&&i.id&&i._hasData&&(g[i.id]=i)});var d=c.first(this._opSetQueue);this._opSetQueue=c.rest(this._opSetQueue),this._applyOpSet(d,this._serverData),this._mergeMagicFields(h);var f=this;a._objectEach(h,function(k,l){f._serverData[l]=a._decode(l,k);var j=a._traverse(f._serverData[l],function(i){return i instanceof a.Object&&g[i.id]?g[i.id]:void 0});j&&(f._serverData[l]=j)}),this._rebuildAllEstimatedData(),this._saving=this._saving-1},_finishFetch:function(f,d){this._opSetQueue=[{}],this._mergeMagicFields(f),this._copyServerData(f),this._hasData=d},_applyOpSet:function(f,g){var d=this;a._objectEach(f,function(j,h){g[h]=j._estimate(g[h],d,h),g[h]===a.Op._UNSET&&delete g[h]})},_resetCacheForKey:function(h){var g=this.attributes[h];if(!(!c.isObject(g)||g instanceof a.Object||g instanceof a.File)){g=g.toJSON?g.toJSON():g;var d=JSON.stringify(g);if(this._hashedJSON[h]!==d){var f=!!this._hashedJSON[h];return this._hashedJSON[h]=d,f}}return !1},_rebuildEstimatedDataForKey:function(d){var f=this;delete this.attributes[d],this._serverData[d]&&(this.attributes[d]=this._serverData[d]),a._arrayEach(this._opSetQueue,function(g){var e=g[d];e&&(f.attributes[d]=e._estimate(f.attributes[d],f,d),f.attributes[d]===a.Op._UNSET?delete f.attributes[d]:f._resetCacheForKey(d))})},_rebuildAllEstimatedData:function(){var f=this,d=c.clone(this.attributes);this.attributes=c.clone(this._serverData),a._arrayEach(this._opSetQueue,function(e){f._applyOpSet(e,f.attributes),a._objectEach(e,function(g,h){f._resetCacheForKey(h)})}),a._objectEach(d,function(e,g){f.attributes[g]!==e&&f.trigger("change:"+g,f,f.attributes[g],{})}),a._objectEach(this.attributes,function(g,e){c.has(d,e)||f.trigger("change:"+e,f,g,{})})},set:function(k,j,g){var h;if(c.isObject(k)||a._isNullOrUndefined(k)?(h=k,a._objectEach(h,function(i,m){h[m]=a._decode(m,i)}),g=j):(h={},h[k]=a._decode(k,j)),g=g||{},!h){return this}h instanceof a.Object&&(h=h.attributes),g.unset&&a._objectEach(h,function(i,m){h[m]=new a.Op.Unset});var l=c.clone(h),f=this;if(a._objectEach(l,function(i,m){i instanceof a.Op&&(l[m]=i._estimate(f.attributes[m],f,m),l[m]===a.Op._UNSET&&delete l[m])}),!this._validate(h,g)){return !1}this._mergeMagicFields(h),g.changes={};var d=this._escapedAttributes;return this._previousAttributes||{},a._arrayEach(c.keys(h),function(n){var m=h[n];m instanceof a.Relation&&(m.parent=f),m instanceof a.Op||(m=new a.Op.Set(m));var p=!0;m instanceof a.Op.Set&&c.isEqual(f.attributes[n],m.value)&&(p=!1),p&&(delete d[n],g.silent?f._silent[n]=!0:g.changes[n]=!0);var i=c.last(f._opSetQueue);i[n]=m._mergeWithPrevious(i[n]),f._rebuildEstimatedDataForKey(n),p?(f.changed[n]=f.attributes[n],g.silent||(f._pending[n]=!0)):(delete f.changed[n],delete f._pending[n])}),g.silent||this.change(g),this},unset:function(f,d){return d=d||{},d.unset=!0,this.set(f,null,d)},increment:function(f,d){return(c.isUndefined(d)||c.isNull(d))&&(d=1),this.set(f,new a.Op.Increment(d))},add:function(d,f){return this.set(d,new a.Op.Add([f]))},addUnique:function(d,f){return this.set(d,new a.Op.AddUnique([f]))},remove:function(d,f){return this.set(d,new a.Op.Remove([f]))},op:function(d){return c.last(this._opSetQueue)[d]},clear:function(f){f=f||{},f.unset=!0;var d=c.extend(this.attributes,this._operations);return this.set(d,f)},_getSaveJSON:function(){var d=c.clone(c.first(this._opSetQueue));return a._objectEach(d,function(e,f){d[f]=e.toJSON()}),d},_canBeSerialized:function(){return a.Object._canBeSerializedAsValue(this.attributes)},fetch:function(f){var g=this;f=f||{};var d=a._request({method:"GET",route:"classes",className:this.className,objectId:this.id,useMasterKey:f.useMasterKey});return d.then(function(j,h,i){return g._finishFetch(g.parse(j,h,i),!0),g})._thenRunCallbacks(f,this)},save:function(w,g,n){var B,k,A;if(c.isObject(w)||a._isNullOrUndefined(w)?(B=w,A=g):(B={},B[w]=g,A=n),!A&&B){var y=c.reject(B,function(f,d){return c.include(["success","error","wait"],d)});if(0===y.length){var t=!0;if(c.has(B,"success")&&!c.isFunction(B.success)&&(t=!1),c.has(B,"error")&&!c.isFunction(B.error)&&(t=!1),t){return this.save(null,B)}}}A=c.clone(A)||{},A.wait&&(k=c.clone(this.attributes));var m=c.clone(A)||{};m.wait&&(m.silent=!0);var q;if(m.error=function(f,d){q=d},B&&!this.set(B,m)){return a.Promise.error(q)._thenRunCallbacks(A,this)}var j=this;j._refreshCache();var x=[],z=[];return a.Object._findUnsavedChildren(j.attributes,x,z),x.length+z.length>0?a.Object._deepSaveAsync(this.attributes,{useMasterKey:A.useMasterKey}).then(function(){return j.save(null,A)},function(d){return a.Promise.error(d)._thenRunCallbacks(A,j)}):(this._startSave(),this._saving=(this._saving||0)+1,this._allPreviousSaves=this._allPreviousSaves||a.Promise.as(),this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){var p=j.id?"PUT":"POST",l=j._getSaveJSON(),h="classes",d=j.className;"_User"!==j.className||j.id||(h="users",d=null);var o=a._request({route:h,className:d,objectId:j.id,method:p,useMasterKey:A.useMasterKey,data:l});return o=o.then(function(v,s,u){var f=j.parse(v,s,u);return A.wait&&(f=c.extend(B||{},f)),j._finishSave(f),A.wait&&j.set(k,m),j},function(f){return j._cancelSave(),a.Promise.error(f)})._thenRunCallbacks(A,j)}),this._allPreviousSaves)},destroy:function(g){g=g||{};var h=this,f=function(){h.trigger("destroy",h,h.collection,g)};if(!this.id){return f()}g.wait||f();var d=a._request({route:"classes",className:this.className,objectId:this.id,method:"DELETE",useMasterKey:g.useMasterKey});return d.then(function(){return g.wait&&f(),h})._thenRunCallbacks(g,this)},parse:function(g,f){var d=c.clone(g);return c(["createdAt","updatedAt"]).each(function(h){d[h]&&(d[h]=a._parseDate(d[h]))}),d.updatedAt||(d.updatedAt=d.createdAt),f&&(this._existed=201!==f),d},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return !this.id},change:function(h){h=h||{};var g=this._changing;this._changing=!0;var d=this;a._objectEach(this._silent,function(i){d._pending[i]=!0});var f=c.extend({},h.changes,this._silent);if(this._silent={},a._objectEach(f,function(e,i){d.trigger("change:"+i,d,d.get(i),h)}),g){return this}for(var j=function(k,i){d._pending[i]||d._silent[i]||delete d.changed[i]};!c.isEmpty(this._pending);){this._pending={},this.trigger("change",this,h),a._objectEach(this.changed,j),d._previousAttributes=c.clone(this.attributes)}return this._changing=!1,this},existed:function(){return this._existed},hasChanged:function(d){return arguments.length?this.changed&&c.has(this.changed,d):!c.isEmpty(this.changed)},changedAttributes:function(g){if(!g){return this.hasChanged()?c.clone(this.changed):!1}var f={},d=this._previousAttributes;return a._objectEach(g,function(i,h){c.isEqual(d[h],i)||(f[h]=i)}),f},previous:function(d){return arguments.length&&this._previousAttributes?this._previousAttributes[d]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},validate:function(f){if(c.has(f,"ACL")&&!(f.ACL instanceof a.ACL)){return new a.Error(a.Error.OTHER_CAUSE,"ACL must be a Parse.ACL.")}var d=!0;return a._objectEach(f,function(h,g){/^[A-Za-z][0-9A-Za-z_]*$/.test(g)||(d=!1)}),d?!1:new a.Error(a.Error.INVALID_KEY_NAME)},_validate:function(g,d){if(d.silent||!this.validate){return !0}g=c.extend({},this.attributes,g);var f=this.validate(g,d);return f?(d&&d.error?d.error(this,f,d):this.trigger("error",this,f,d),!1):!0},getACL:function(){return this.get("ACL")},setACL:function(f,d){return this.set("ACL",f,d)}}),a.Object._getSubclass=function(f){if(!c.isString(f)){throw"Parse.Object._getSubclass requires a string argument."}var d=a.Object._classMap[f];return d||(d=a.Object.extend(f),a.Object._classMap[f]=d),d},a.Object._create=function(g,h,f){var d=a.Object._getSubclass(g);return new d(h,f)},a.Object._toObjectIdArray=function(j,l){if(0===j.length){return a.Promise.as(j)}for(var h,f=j[0].className,g=[],k=0;k<j.length;k++){var d=j[k];if(f!==d.className){return h=new a.Error(a.Error.INVALID_CLASS_NAME,"All objects should be of the same class"),a.Promise.error(h)}if(!d.id){return h=new a.Error(a.Error.MISSING_OBJECT_ID,"All objects must have an ID"),a.Promise.error(h)}l&&d._hasData||g.push(d.id)}return a.Promise.as(g)},a.Object._updateWithFetchedResults=function(k,m,j){var g={};a._arrayEach(m,function(i){g[i.id]=i});for(var h=0;h<k.length;h++){var l=k[h],f=g[l.id];if(!f&&j){var d=new a.Error(a.Error.OBJECT_NOT_FOUND,"All objects must exist on the server");return a.Promise.error(d)}l._mergeFromObject(f)}return a.Promise.as(k)},a.Object._fetchAll=function(f,g){if(0===f.length){return a.Promise.as(f)}var d=!g;return a.Object._toObjectIdArray(f,d).then(function(j){var h=f[0].className,e=new a.Query(h);return e.containedIn("objectId",j),e.limit=j.length,e.find()}).then(function(e){return a.Object._updateWithFetchedResults(f,e,g)})},a.Object._classMap={},a.Object._extend=a._extend,a.Object.extend=function(h,g,d){if(!c.isString(h)){if(h&&c.has(h,"className")){return a.Object.extend(h.className,h,g)}throw new Error("Parse.Object.extend's first argument should be the className.")}"User"===h&&a.User._performUserRewrite&&(h="_User"),g=g||{},g.className=h;var f=null;if(c.has(a.Object._classMap,h)){var j=a.Object._classMap[h];f=j._extend(g,d)}else{f=this._extend(g,d)}return f.extend=function(k){if(c.isString(k)||k&&c.has(k,"className")){return a.Object.extend.apply(f,arguments)}var e=[h].concat(a._.toArray(arguments));return a.Object.extend.apply(f,e)},a.Object._classMap[h]=f,f},a.Object._findUnsavedChildren=function(f,g,d){a._traverse(f,function(h){return h instanceof a.Object?(h._refreshCache(),h.dirty()&&g.push(h),void 0):h instanceof a.File?(h.url()||d.push(h),void 0):void 0})},a.Object._canBeSerializedAsValue=function(f){if(f instanceof a.Object){return !!f.id}if(f instanceof a.File){return !0}var d=!0;return c.isArray(f)?a._arrayEach(f,function(g){a.Object._canBeSerializedAsValue(g)||(d=!1)}):c.isObject(f)&&a._objectEach(f,function(g){a.Object._canBeSerializedAsValue(g)||(d=!1)}),d},a.Object._deepSaveAsync=function(k,j){var g=[],h=[];a.Object._findUnsavedChildren(k,g,h);var l=a.Promise.as();c.each(h,function(i){l=l.then(function(){return i.save(j)})});var f=c.uniq(g),d=c.uniq(f);return l.then(function(){return a.Promise._continueWhile(function(){return d.length>0},function(){var p=[],m=[];if(a._arrayEach(d,function(e){return p.length>20?(m.push(e),void 0):(e._canBeSerialized()?p.push(e):m.push(e),void 0)}),d=m,0===p.length){return a.Promise.error(new a.Error(a.Error.OTHER_CAUSE,"Tried to save a batch with a cycle."))}var n=a.Promise.when(c.map(p,function(i){return i._allPreviousSaves||a.Promise.as()})),q=new a.Promise;return a._arrayEach(p,function(i){i._allPreviousSaves=q}),n._continueWith(function(){return a._request({route:"batch",method:"POST",useMasterKey:j.useMasterKey,data:{requests:c.map(p,function(s){var i=s._getSaveJSON(),u="POST",o="/1/classes/"+s.className;return s.id&&(o=o+"/"+s.id,u="PUT"),s._startSave(),{method:u,path:o,body:i}})}}).then(function(u,t,e){var o;return a._arrayEach(p,function(r,i){u[i].success?r._finishSave(r.parse(u[i].success,t,e)):(o=o||u[i].error,r._cancelSave())}),o?a.Promise.error(new a.Error(o.code,o.error)):void 0}).then(function(i){return q.resolve(i),i},function(i){return q.reject(i),a.Promise.error(i)})})})}).then(function(){return k})}}(this),function(b){b.Parse=b.Parse||{};var a=b.Parse,c=a._;a.Role=a.Object.extend("_Role",{constructor:function(f,d){c.isString(f)&&d instanceof a.ACL?(a.Object.prototype.constructor.call(this,null,null),this.setName(f),this.setACL(d)):a.Object.prototype.constructor.call(this,f,d)},getName:function(){return this.get("name")},setName:function(f,d){return this.set("name",f,d)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(g,f){if("name" in g&&g.name!==this.getName()){var d=g.name;if(this.id&&this.id!==g.objectId){return new a.Error(a.Error.OTHER_CAUSE,"A role's name can only be set before it has been saved.")}if(!c.isString(d)){return new a.Error(a.Error.OTHER_CAUSE,"A role's name must be a String.")}if(!/^[0-9a-zA-Z\-_ ]+$/.test(d)){return new a.Error(a.Error.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}}return a.Object.prototype.validate?a.Object.prototype.validate.call(this,g,f):!1}})}(this),function(c){c.Parse=c.Parse||{};var a=c.Parse,d=a._;a.Collection=function(g,f){f=f||{},f.comparator&&(this.comparator=f.comparator),f.model&&(this.model=f.model),f.query&&(this.query=f.query),this._reset(),this.initialize.apply(this,arguments),g&&this.reset(g,{silent:!0,parse:f.parse})},d.extend(a.Collection.prototype,a.Events,{model:a.Object,initialize:function(){},toJSON:function(){return this.map(function(f){return f.toJSON()})},add:function(q,g){var m,w,j,v,t,p,k={},n={};for(g=g||{},q=d.isArray(q)?q.slice():[q],m=0,j=q.length;j>m;m++){if(q[m]=this._prepareModel(q[m],g),v=q[m],!v){throw new Error("Can't add an invalid model to a collection")}if(t=v.cid,k[t]||this._byCid[t]){throw new Error("Duplicate cid: can't add the same model to a collection twice")}if(p=v.id,!a._isNullOrUndefined(p)&&(n[p]||this._byId[p])){throw new Error("Duplicate id: can't add the same model to a collection twice")}n[p]=v,k[t]=v}for(m=0;j>m;m++){(v=q[m]).on("all",this._onModelEvent,this),this._byCid[v.cid]=v,v.id&&(this._byId[v.id]=v)}if(this.length+=j,w=a._isNullOrUndefined(g.at)?this.models.length:g.at,this.models.splice.apply(this.models,[w,0].concat(q)),this.comparator&&this.sort({silent:!0}),g.silent){return this}for(m=0,j=this.models.length;j>m;m++){v=this.models[m],k[v.cid]&&(g.index=m,v.trigger("add",v,this,g))}return this},remove:function(k,g){var j,f,h,l;for(g=g||{},k=d.isArray(k)?k.slice():[k],j=0,f=k.length;f>j;j++){l=this.getByCid(k[j])||this.get(k[j]),l&&(delete this._byId[l.id],delete this._byCid[l.cid],h=this.indexOf(l),this.models.splice(h,1),this.length--,g.silent||(g.index=h,l.trigger("remove",l,this,g)),this._removeReference(l))}return this},get:function(f){return f&&this._byId[f.id||f]},getByCid:function(f){return f&&this._byCid[f.cid||f]},at:function(f){return this.models[f]},sort:function(g){if(g=g||{},!this.comparator){throw new Error("Cannot sort a set without a comparator")}var f=d.bind(this.comparator,this);return 1===this.comparator.length?this.models=this.sortBy(f):this.models.sort(f),g.silent||this.trigger("reset",this,g),this},pluck:function(f){return d.map(this.models,function(e){return e.get(f)})},reset:function(g,h){var f=this;return g=g||[],h=h||{},a._arrayEach(this.models,function(i){f._removeReference(i)}),this._reset(),this.add(g,{silent:!0,parse:h.parse}),h.silent||this.trigger("reset",this,h),this},fetch:function(h){h=d.clone(h)||{},void 0===h.parse&&(h.parse=!0);var g=this,f=this.query||new a.Query(this.model);return f.find({useMasterKey:h.useMasterKey}).then(function(e){return h.add?g.add(e,h):g.reset(e,h),g})._thenRunCallbacks(h,this)},create:function(j,g){var h=this;if(g=g?d.clone(g):{},j=this._prepareModel(j,g),!j){return !1}g.wait||h.add(j,g);var f=g.success;return g.success=function(i,e){g.wait&&h.add(i,g),f?f(i,e):i.trigger("sync",j,e,g)},j.save(null,g),j},parse:function(f){return f},chain:function(){return d(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(g,h){if(g instanceof a.Object){g.collection||(g.collection=this)}else{var f=g;h.collection=this,g=new this.model(f,h),g._validate(g.attributes,h)||(g=!1)}return g},_removeReference:function(f){this===f.collection&&delete f.collection,f.off("all",this._onModelEvent,this)},_onModelEvent:function(h,f,i,g){("add"!==h&&"remove"!==h||i===this)&&("destroy"===h&&this.remove(f,g),f&&"change:objectId"===h&&(delete this._byId[f.previous("objectId")],this._byId[f.id]=f),this.trigger.apply(this,arguments))}});var b=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];a._arrayEach(b,function(f){a.Collection.prototype[f]=function(){return d[f].apply(d,[this.models].concat(d.toArray(arguments)))}}),a.Collection.extend=a._extend}(this),function(d){d.Parse=d.Parse||{};var b=d.Parse,f=b._;b.View=function(g){this.cid=f.uniqueId("view"),this._configure(g||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};var c=/^(\S+)\s*(.*)$/,a=["model","collection","el","id","attributes","className","tagName"];f.extend(b.View.prototype,b.Events,{tagName:"div",$:function(g){return this.$el.find(g)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(j,k,h){var g=document.createElement(j);return k&&b.$(g).attr(k),h&&b.$(g).html(h),g},setElement:function(g,h){return this.$el=b.$(g),this.el=this.$el[0],h!==!1&&this.delegateEvents(),this},delegateEvents:function(h){if(h=h||b._getValue(this,"events")){this.undelegateEvents();var g=this;b._objectEach(h,function(i,j){if(f.isFunction(i)||(i=g[h[j]]),!i){throw new Error('Event "'+h[j]+'" does not exist')}var l=j.match(c),e=l[1],k=l[2];i=f.bind(i,g),e+=".delegateEvents"+g.cid,""===k?g.$el.bind(e,i):g.$el.delegate(k,e,i)})}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(h){this.options&&(h=f.extend({},this.options,h));var g=this;f.each(a,function(e){h[e]&&(g[e]=h[e])}),this.options=h},_ensureElement:function(){if(this.el){this.setElement(this.el,!1)}else{var g=b._getValue(this,"attributes")||{};this.id&&(g.id=this.id),this.className&&(g["class"]=this.className),this.setElement(this.make(this.tagName,g),!1)}}}),b.View.extend=b._extend}(this),function(b){b.Parse=b.Parse||{};var a=b.Parse,c=a._;a.User=a.Object.extend("_User",{_isCurrentUser:!1,_mergeFromObject:function(d){d.getSessionToken()&&(this._sessionToken=d.getSessionToken()),a.User.__super__._mergeFromObject.call(this,d)},_mergeMagicFields:function(d){d.sessionToken&&(this._sessionToken=d.sessionToken,delete d.sessionToken),a.User.__super__._mergeMagicFields.call(this,d)},_cleanupAuthData:function(){if(this.isCurrent()){var d=this.get("authData");d&&a._objectEach(this.get("authData"),function(e,f){d[f]||delete d[f]})}},_synchronizeAllAuthData:function(){var d=this.get("authData");if(d){var f=this;a._objectEach(this.get("authData"),function(h,g){f._synchronizeAuthData(g)})}},_synchronizeAuthData:function(h){if(this.isCurrent()){var g;c.isString(h)?(g=h,h=a.User._authProviders[g]):g=h.getAuthType();var d=this.get("authData");if(d&&h){var f=h.restoreAuthentication(d[g]);f||this._unlinkFrom(h)}}},_handleSaveResult:function(d){d&&(this._isCurrentUser=!0),this._cleanupAuthData(),this._synchronizeAllAuthData(),delete this._serverData.password,this._rebuildEstimatedDataForKey("password"),this._refreshCache(),(d||this.isCurrent())&&a.User._saveCurrentUser(this)},_linkWith:function(k,j){var g;if(c.isString(k)?(g=k,k=a.User._authProviders[k]):g=k.getAuthType(),c.has(j,"authData")){var h=this.get("authData")||{};h[g]=j.authData,this.set("authData",h);var l=c.clone(j)||{};return l.success=function(i){i._handleSaveResult(!0),j.success&&j.success.apply(this,arguments)},this.save({authData:h},l)}var f=this,d=new a.Promise;return k.authenticate({success:function(m,i){f._linkWith(m,{authData:i,success:j.success,error:j.error}).then(function(){d.resolve(f)})},error:function(m,i){j.error&&j.error(f,i),d.reject(i)}}),d},_unlinkFrom:function(h,g){var d;c.isString(h)?(d=h,h=a.User._authProviders[h]):d=h.getAuthType();var f=c.clone(g),j=this;return f.authData=null,f.success=function(){j._synchronizeAuthData(h),g.success&&g.success.apply(this,arguments)},this._linkWith(h,f)},_isLinked:function(g){var d;d=c.isString(g)?g:g.getAuthType();var f=this.get("authData")||{};return !!f[d]},_logOutWithAll:function(){var d=this.get("authData");if(d){var f=this;a._objectEach(this.get("authData"),function(h,g){f._logOutWith(g)})}},_logOutWith:function(d){this.isCurrent()&&(c.isString(d)&&(d=a.User._authProviders[d]),d&&d.deauthenticate&&d.deauthenticate())},signUp:function(j,h){var f;h=h||{};var g=j&&j.username||this.get("username");if(!g||""===g){return f=new a.Error(a.Error.OTHER_CAUSE,"Cannot sign up user with an empty name."),h&&h.error&&h.error(this,f),a.Promise.error(f)}var k=j&&j.password||this.get("password");if(!k||""===k){return f=new a.Error(a.Error.OTHER_CAUSE,"Cannot sign up user with an empty password."),h&&h.error&&h.error(this,f),a.Promise.error(f)}var d=c.clone(h);return d.success=function(i){i._handleSaveResult(!0),h.success&&h.success.apply(this,arguments)},this.save(j,d)},logIn:function(f){var g=this;f=f||{};var d=a._request({route:"login",method:"GET",useMasterKey:f.useMasterKey,data:this.toJSON()});return d.then(function(l,j,k){var h=g.parse(l,j,k);return g._finishFetch(h),g._handleSaveResult(!0),g})._thenRunCallbacks(f,this)},save:function(j,h,f){var g,k;c.isObject(j)||c.isNull(j)||c.isUndefined(j)?(g=j,k=h):(g={},g[j]=h,k=f),k=k||{};var d=c.clone(k);return d.success=function(i){i._handleSaveResult(!1),k.success&&k.success.apply(this,arguments)},a.Object.prototype.save.call(this,g,d)},fetch:function(f){var d=f?c.clone(f):{};return d.success=function(e){e._handleSaveResult(!1),f&&f.success&&f.success.apply(this,arguments)},a.Object.prototype.fetch.call(this,d)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},setUsername:function(f,d){return this.set("username",f,d)},setPassword:function(f,d){return this.set("password",f,d)},getEmail:function(){return this.get("email")},setEmail:function(f,d){return this.set("email",f,d)},authenticated:function(){return !!this._sessionToken&&a.User.current()&&a.User.current().id===this.id},getSessionToken:function(){return this._sessionToken}},{_currentUser:null,_currentUserMatchesDisk:!1,_CURRENT_USER_KEY:"currentUser",_authProviders:{},_performUserRewrite:!0,signUp:function(h,j,g,d){g=g||{},g.username=h,g.password=j;var f=a.Object._create("_User");return f.signUp(g,d)},logIn:function(g,h,f){var d=a.Object._create("_User");return d._finishFetch({username:g,password:h}),d.logIn(f)},become:function(f,g){g=g||{};var d=a.Object._create("_User");return a._request({route:"users",className:"me",method:"GET",useMasterKey:g.useMasterKey,sessionToken:f}).then(function(k,j,l){var h=d.parse(k,j,l);return d._finishFetch(h),d._handleSaveResult(!0),d})._thenRunCallbacks(g,d)},logOut:function(){null!==a.User._currentUser&&(a.User._currentUser._logOutWithAll(),a.User._currentUser._isCurrentUser=!1),a.User._currentUserMatchesDisk=!0,a.User._currentUser=null,a.localStorage.removeItem(a._getParsePath(a.User._CURRENT_USER_KEY))},requestPasswordReset:function(f,g){g=g||{};var d=a._request({route:"requestPasswordReset",method:"POST",useMasterKey:g.useMasterKey,data:{email:f}});return d._thenRunCallbacks(g)},current:function(){if(a.User._currentUser){return a.User._currentUser}if(a.User._currentUserMatchesDisk){return a.User._currentUser}a.User._currentUserMatchesDisk=!0;var d=a.localStorage.getItem(a._getParsePath(a.User._CURRENT_USER_KEY));if(!d){return null}a.User._currentUser=a.Object._create("_User"),a.User._currentUser._isCurrentUser=!0;var f=JSON.parse(d);return a.User._currentUser.id=f._id,delete f._id,a.User._currentUser._sessionToken=f._sessionToken,delete f._sessionToken,a.User._currentUser._finishFetch(f),a.User._currentUser._synchronizeAllAuthData(),a.User._currentUser._refreshCache(),a.User._currentUser._opSetQueue=[{}],a.User._currentUser},allowCustomUserClass:function(d){this._performUserRewrite=!d},_saveCurrentUser:function(d){a.User._currentUser!==d&&a.User.logOut(),d._isCurrentUser=!0,a.User._currentUser=d,a.User._currentUserMatchesDisk=!0;var f=d.toJSON();f._id=d.id,f._sessionToken=d._sessionToken,a.localStorage.setItem(a._getParsePath(a.User._CURRENT_USER_KEY),JSON.stringify(f))},_registerAuthenticationProvider:function(d){a.User._authProviders[d.getAuthType()]=d,a.User.current()&&a.User.current()._synchronizeAuthData(d.getAuthType())},_logInWith:function(f,g){var d=a.Object._create("_User");return d._linkWith(f,g)}})}(this),function(b){b.Parse=b.Parse||{};var a=b.Parse,c=a._;a.Query=function(d){c.isString(d)&&(d=a.Object._getSubclass(d)),this.objectClass=d,this.className=d.prototype.className,this._where={},this._include=[],this._limit=-1,this._skip=0,this._extraOptions={}},a.Query.or=function(){var g=c.toArray(arguments),f=null;a._arrayEach(g,function(h){if(c.isNull(f)&&(f=h.className),f!==h.className){throw"All queries must be for the same class"}});var d=new a.Query(f);return d._orQuery(g),d},a.Query.prototype={get:function(h,g){var d=this;d.equalTo("objectId",h);var f={};return g&&c.has(g,"useMasterKey")&&(f={useMasterKey:g.useMasterKey}),d.first(f).then(function(i){if(i){return i}var j=new a.Error(a.Error.OBJECT_NOT_FOUND,"Object not found.");return a.Promise.error(j)})._thenRunCallbacks(g,null)},toJSON:function(){var d={where:this._where};return this._include.length>0&&(d.include=this._include.join(",")),this._select&&(d.keys=this._select.join(",")),this._limit>=0&&(d.limit=this._limit),this._skip>0&&(d.skip=this._skip),void 0!==this._order&&(d.order=this._order.join(",")),a._objectEach(this._extraOptions,function(e,f){d[f]=e}),d},find:function(g){var f=this;g=g||{};var d=a._request({route:"classes",className:this.className,method:"GET",useMasterKey:g.useMasterKey,data:this.toJSON()});return d.then(function(h){return c.map(h.results,function(j){var e;return e=h.className?new a.Object(h.className):new f.objectClass,e._finishFetch(j,!0),e})})._thenRunCallbacks(g)},count:function(g){var h=this;g=g||{};var f=this.toJSON();f.limit=0,f.count=1;var d=a._request({route:"classes",className:h.className,method:"GET",useMasterKey:g.useMasterKey,data:f});return d.then(function(i){return i.count})._thenRunCallbacks(g)},first:function(h){var g=this;h=h||{};var d=this.toJSON();d.limit=1;var f=a._request({route:"classes",className:this.className,method:"GET",useMasterKey:h.useMasterKey,data:d});return f.then(function(i){return c.map(i.results,function(j){var e;return e=i.className?new a.Object(i.className):new g.objectClass,e._finishFetch(j,!0),e})[0]})._thenRunCallbacks(h)},collection:function(f,d){return d=d||{},new a.Collection(f,c.extend(d,{model:this.objectClass,query:this}))},skip:function(d){return this._skip=d,this},limit:function(d){return this._limit=d,this},equalTo:function(f,d){return c.isUndefined(d)?this.doesNotExist(f):(this._where[f]=a._encode(d),this)},_addCondition:function(f,g,d){return this._where[f]||(this._where[f]={}),this._where[f][g]=a._encode(d),this},notEqualTo:function(f,d){return this._addCondition(f,"$ne",d),this},lessThan:function(f,d){return this._addCondition(f,"$lt",d),this},greaterThan:function(f,d){return this._addCondition(f,"$gt",d),this},lessThanOrEqualTo:function(f,d){return this._addCondition(f,"$lte",d),this},greaterThanOrEqualTo:function(f,d){return this._addCondition(f,"$gte",d),this},containedIn:function(f,d){return this._addCondition(f,"$in",d),this},notContainedIn:function(f,d){return this._addCondition(f,"$nin",d),this},containsAll:function(f,d){return this._addCondition(f,"$all",d),this},exists:function(d){return this._addCondition(d,"$exists",!0),this},doesNotExist:function(d){return this._addCondition(d,"$exists",!1),this},matches:function(f,d,g){return this._addCondition(f,"$regex",d),g||(g=""),d.ignoreCase&&(g+="i"),d.multiline&&(g+="m"),g&&g.length&&this._addCondition(f,"$options",g),this},matchesQuery:function(f,d){var g=d.toJSON();return g.className=d.className,this._addCondition(f,"$inQuery",g),this},doesNotMatchQuery:function(f,d){var g=d.toJSON();return g.className=d.className,this._addCondition(f,"$notInQuery",g),this},matchesKeyInQuery:function(g,d,h){var f=h.toJSON();return f.className=h.className,this._addCondition(g,"$select",{key:d,query:f}),this},doesNotMatchKeyInQuery:function(g,d,h){var f=h.toJSON();return f.className=h.className,this._addCondition(g,"$dontSelect",{key:d,query:f}),this},_orQuery:function(f){var d=c.map(f,function(g){return g.toJSON().where});return this._where.$or=d,this},_quote:function(d){return"\\Q"+d.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(f,d){return this._addCondition(f,"$regex",this._quote(d)),this},startsWith:function(f,d){return this._addCondition(f,"$regex","^"+this._quote(d)),this},endsWith:function(f,d){return this._addCondition(f,"$regex",this._quote(d)+"$"),this},ascending:function(){return this._order=[],this.addAscending.apply(this,arguments)},addAscending:function(){var d=this;return this._order||(this._order=[]),a._arrayEach(arguments,function(e){Array.isArray(e)&&(e=e.join()),d._order=d._order.concat(e.replace(/\s/g,"").split(","))}),this},descending:function(){return this._order=[],this.addDescending.apply(this,arguments)},addDescending:function(){var d=this;return this._order||(this._order=[]),a._arrayEach(arguments,function(e){Array.isArray(e)&&(e=e.join()),d._order=d._order.concat(c.map(e.replace(/\s/g,"").split(","),function(f){return"-"+f}))}),this},near:function(d,f){return f instanceof a.GeoPoint||(f=new a.GeoPoint(f)),this._addCondition(d,"$nearSphere",f),this},withinRadians:function(f,d,g){return this.near(f,d),this._addCondition(f,"$maxDistance",g),this},withinMiles:function(f,d,g){return this.withinRadians(f,d,g/3958.8)},withinKilometers:function(f,d,g){return this.withinRadians(f,d,g/6371)},withinGeoBox:function(f,g,d){return g instanceof a.GeoPoint||(g=new a.GeoPoint(g)),d instanceof a.GeoPoint||(d=new a.GeoPoint(d)),this._addCondition(f,"$within",{$box:[g,d]}),this},include:function(){var d=this;return a._arrayEach(arguments,function(e){c.isArray(e)?d._include=d._include.concat(e):d._include.push(e)}),this},select:function(){var d=this;return this._select=this._select||[],a._arrayEach(arguments,function(e){c.isArray(e)?d._select=d._select.concat(e):d._select.push(e)}),this},each:function(j,h){if(h=h||{},this._order||this._skip||this._limit>=0){var f="Cannot iterate on a query with sort, skip, or limit.";return a.Promise.error(f)._thenRunCallbacks(h)}new a.Promise;var g=new a.Query(this.objectClass);g._limit=h.batchSize||100,g._where=c.clone(this._where),g._include=c.clone(this._include),g.ascending("objectId");var k={};c.has(h,"useMasterKey")&&(k.useMasterKey=h.useMasterKey);var d=!1;return a.Promise._continueWhile(function(){return !d},function(){return g.find(k).then(function(i){var e=a.Promise.as();return a._.each(i,function(l){e=e.then(function(){return j(l)})}),e.then(function(){i.length>=g._limit?g.greaterThan("objectId",i[i.length-1].id):d=!0})})})._thenRunCallbacks(h)}}}(this),function(f){f.Parse=f.Parse||{};var b,h,d=f.Parse,a=d._,c=!1,g={authenticate:function(i){var j=this;FB.login(function(e){e.authResponse?i.success&&i.success(j,{id:e.authResponse.userID,access_token:e.authResponse.accessToken,expiration_date:(new Date(1000*e.authResponse.expiresIn+(new Date).getTime())).toJSON()}):i.error&&i.error(j,e)},{scope:b})},restoreAuthentication:function(k){if(k){var i={userID:k.id,accessToken:k.access_token,expiresIn:(d._parseDate(k.expiration_date).getTime()-(new Date).getTime())/1000},j=a.clone(h);j.authResponse=i,j.status=!1;var l=FB.getAuthResponse();l&&l.userID!==i.userID&&FB.logout(),FB.init(j)}return !0},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null)}};d.FacebookUtils={init:function(j){if("undefined"==typeof FB){throw"The Facebook JavaScript SDK must be loaded before calling init."}if(h=a.clone(j)||{},h.status&&"undefined"!=typeof console){var i=console.warn||console.log||function(){};i.call(console,"The 'status' flag passed into FB.init, when set to true, can interfere with Parse Facebook integration, so it has been suppressed. Please call FB.getLoginStatus() explicitly if you require this behavior.")}h.status=!1,FB.init(h),d.User._registerAuthenticationProvider(g),c=!0},isLinked:function(i){return i._isLinked("facebook")},logIn:function(i,k){if(!i||a.isString(i)){if(!c){throw"You must initialize FacebookUtils before calling logIn."}return b=i,d.User._logInWith("facebook",k)}var j=a.clone(k)||{};return j.authData=i,d.User._logInWith("facebook",j)},link:function(j,l,i){if(!l||a.isString(l)){if(!c){throw"You must initialize FacebookUtils before calling link."}return b=l,j._linkWith("facebook",i)}var k=a.clone(i)||{};return k.authData=l,j._linkWith("facebook",k)},unlink:function(j,i){if(!c){throw"You must initialize FacebookUtils before calling unlink."}return j._unlinkFrom("facebook",i)}}}(this),function(d){d.Parse=d.Parse||{};var b=d.Parse,f=b._;b.History=function(){this.handlers=[],f.bindAll(this,"checkUrl")};var c=/^[#\/]/,a=/msie [\w.]+/;b.History.started=!1,f.extend(b.History.prototype,b.Events,{interval:50,getHash:function(h){var g=h?h.location:window.location,i=g.href.match(/#(.*)$/);return i?i[1]:""},getFragment:function(h,j){if(b._isNullOrUndefined(h)){if(this._hasPushState||j){h=window.location.pathname;var g=window.location.search;g&&(h+=g)}else{h=this.getHash()}}return h.indexOf(this.options.root)||(h=h.substr(this.options.root.length)),h.replace(c,"")},start:function(k){if(b.History.started){throw new Error("Parse.history has already been started")}b.History.started=!0,this.options=f.extend({},{root:"/"},this.options,k),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var i=this.getFragment(),l=document.documentMode,h=a.exec(navigator.userAgent.toLowerCase())&&(!l||7>=l);h&&(this.iframe=b.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?b.$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange" in window&&!h?b.$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=window.setInterval(this.checkUrl,this.interval)),this.fragment=i;var g=window.location,j=g.pathname===this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!j?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&j&&g.hash&&(this.fragment=this.getHash().replace(c,""),window.history.replaceState({},document.title,g.protocol+"//"+g.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){b.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),window.clearInterval(this._checkUrlInterval),b.History.started=!1},route:function(h,g){this.handlers.unshift({route:h,callback:g})},checkUrl:function(){var g=this.getFragment();return g===this.fragment&&this.iframe&&(g=this.getFragment(this.getHash(this.iframe))),g===this.fragment?!1:(this.iframe&&this.navigate(g),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(i){var g=this.fragment=this.getFragment(i),h=f.any(this.handlers,function(j){return j.route.test(g)?(j.callback(g),!0):void 0});return h},navigate:function(j,k){if(!b.History.started){return !1}k&&k!==!0||(k={trigger:k});var g=(j||"").replace(c,"");if(this.fragment!==g){if(this._hasPushState){0!==g.indexOf(this.options.root)&&(g=this.options.root+g),this.fragment=g;var h=k.replace?"replaceState":"pushState";window.history[h]({},document.title,g)}else{this._wantsHashChange?(this.fragment=g,this._updateHash(window.location,g,k.replace),this.iframe&&g!==this.getFragment(this.getHash(this.iframe))&&(k.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,g,k.replace))):window.location.assign(this.options.root+j)}k.trigger&&this.loadUrl(j)}},_updateHash:function(i,g,j){if(j){var h=i.toString().replace(/(javascript:|#).*$/,"");i.replace(h+"#"+g)}else{i.hash=g}}})}(this),function(f){f.Parse=f.Parse||{};var b=f.Parse,g=b._;b.Router=function(h){h=h||{},h.routes&&(this.routes=h.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var d=/:\w+/g,a=/\*\w+/g,c=/[\-\[\]{}()+?.,\\\^\$\|#\s]/g;g.extend(b.Router.prototype,b.Events,{initialize:function(){},route:function(k,j,h){return b.history=b.history||new b.History,g.isRegExp(k)||(k=this._routeToRegExp(k)),h||(h=this[j]),b.history.route(k,g.bind(function(i){var e=this._extractParameters(k,i);h&&h.apply(this,e),this.trigger.apply(this,["route:"+j].concat(e)),b.history.trigger("route",this,j,e)},this)),this},navigate:function(h,i){b.history.navigate(h,i)},_bindRoutes:function(){if(this.routes){var j=[];for(var h in this.routes){this.routes.hasOwnProperty(h)&&j.unshift([h,this.routes[h]])}for(var k=0,i=j.length;i>k;k++){this.route(j[k][0],j[k][1],this[j[k][1]])}}},_routeToRegExp:function(h){return h=h.replace(c,"\\$&").replace(d,"([^/]+)").replace(a,"(.*?)"),new RegExp("^"+h+"$")},_extractParameters:function(i,h){return i.exec(h).slice(1)}}),b.Router.extend=b._extend}(this),function(b){b.Parse=b.Parse||{};var a=b.Parse,c=a._;a.Cloud=a.Cloud||{},c.extend(a.Cloud,{run:function(g,h,f){f=f||{};var d=a._request({route:"functions",className:g,method:"POST",useMasterKey:f.useMasterKey,data:a._encode(h,null,!0)});return d.then(function(i){return a._decode(null,i).result})._thenRunCallbacks(f)}})}(this),function(b){b.Parse=b.Parse||{};var a=b.Parse;a.Installation=a.Object.extend("_Installation"),a.Push=a.Push||{},a.Push.send=function(d,f){if(f=f||{},d.where&&(d.where=d.where.toJSON().where),d.push_time&&(d.push_time=d.push_time.toJSON()),d.expiration_time&&(d.expiration_time=d.expiration_time.toJSON()),d.expiration_time&&d.expiration_interval){throw"Both expiration_time and expiration_interval can't be set"}var c=a._request({route:"push",method:"POST",data:d,useMasterKey:f.useMasterKey});return c._thenRunCallbacks(f)}}(this);